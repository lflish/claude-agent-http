# ============================================
# Claude Agent HTTP - Environment Configuration
# ============================================
# Copy this file to .env and configure your settings
# Usage: cp .env.example .env

# ============================================
# User Directory Configuration
# ============================================
# Base directory for all user workspaces (inside container: /data/claude-users)
CLAUDE_AGENT_USER_BASE_DIR=/data/claude-users

# Automatically create user directories if they don't exist
CLAUDE_AGENT_USER_AUTO_CREATE_DIR=true

# Host directory for user data (mounted to container)
# Default: /opt/claude-code-http/claude-users
HOST_USER_DATA_DIR=/opt/claude-code-http/claude-users

# ============================================
# Session Storage Configuration
# ============================================
# Storage backend: memory | sqlite | postgresql
# Default: sqlite (lightweight, single-instance)
CLAUDE_AGENT_SESSION_STORAGE=sqlite

# Session TTL in seconds (0 = no expiration)
CLAUDE_AGENT_SESSION_TTL=3600

# SQLite database path (only used if storage=sqlite)
CLAUDE_AGENT_SESSION_SQLITE_PATH=/data/db/sessions.db
# Host directory for SQLite database
# Default: /opt/claude-code-http/db
HOST_DB_DIR=/opt/claude-code-http/db

# ============================================
# PostgreSQL Configuration
# ============================================
# PostgreSQL host (use 'postgres' for docker-compose service name)
CLAUDE_AGENT_SESSION_PG_HOST=postgres

# PostgreSQL port
CLAUDE_AGENT_SESSION_PG_PORT=5432

# PostgreSQL database name
CLAUDE_AGENT_SESSION_PG_DATABASE=claude_agent

# PostgreSQL username
CLAUDE_AGENT_SESSION_PG_USER=postgres

# PostgreSQL password (CHANGE THIS IN PRODUCTION!)
CLAUDE_AGENT_SESSION_PG_PASSWORD=postgres

# Host port for PostgreSQL (external access)
POSTGRES_PORT=5432

# ============================================
# API Server Configuration
# ============================================
# API host (0.0.0.0 allows external connections)
CLAUDE_AGENT_API_HOST=0.0.0.0

# API port (inside container)
CLAUDE_AGENT_API_PORT=8000

# Host port for API (external access)
API_PORT=8000

# ============================================
# Anthropic Claude API Configuration
# ============================================
# Your Anthropic API key (REQUIRED)
# Get it from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_api_key_here

# ============================================
# Session Default Settings (Optional)
# ============================================
# Default Claude model (e.g., claude-3-5-sonnet-20241022)
# Leave empty to use SDK default
CLAUDE_AGENT_DEFAULTS_MODEL=

# Maximum conversation turns per session
# Leave empty for unlimited
CLAUDE_AGENT_DEFAULTS_MAX_TURNS=

# Maximum budget in USD per session
# Leave empty for unlimited
CLAUDE_AGENT_DEFAULTS_MAX_BUDGET_USD=

# ============================================
# Advanced Configuration (Optional)
# ============================================
# Path to custom config.yaml file on host
# HOST_CONFIG_FILE=./config.yaml

# ============================================
# Notes
# ============================================
# 1. Set ANTHROPIC_API_KEY with your actual API key (REQUIRED)
# 2. Default data directory: /opt/claude-code-http/
#    - User workspaces: /opt/claude-code-http/claude-users/
#    - SQLite database: /opt/claude-code-http/db/
# 3. To use PostgreSQL instead of SQLite:
#    - Set CLAUDE_AGENT_SESSION_STORAGE=postgresql
#    - Use docker-compose.postgres.yml
# 4. Create data directories: sudo mkdir -p /opt/claude-code-http/{claude-users,db}
# 5. Set proper permissions: sudo chown -R $USER:$USER /opt/claude-code-http
